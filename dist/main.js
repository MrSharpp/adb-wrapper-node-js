var $iEn1Z$child_process=require("child_process"),$iEn1Z$os=require("os"),$iEn1Z$process=require("process");function $parcel$defineInteropFlag(e){Object.defineProperty(e,"__esModule",{value:!0,configurable:!0})}function $parcel$export(e,a,r,$){Object.defineProperty(e,a,{get:r,set:$,enumerable:!0,configurable:!0})}$parcel$defineInteropFlag(module.exports),$parcel$export(module.exports,"default",()=>$f5bfd4ce37214f4f$export$2e2bcd8739ae039);const $c122116bdd400350$export$684c1904296af82=[],$8e21a199ffaaeeb1$var$currentDevice="";let $8e21a199ffaaeeb1$var$explicitAdbPath="";const $8e21a199ffaaeeb1$var$execCmd=$=>new Promise((a,r)=>{if($?$=$.split(/\s{1,}/g).join(" ").split(" "):r(new Error("No CMD")),$c122116bdd400350$export$684c1904296af82.includes($[0])&&""==$8e21a199ffaaeeb1$var$currentDevice)return console.error("this command requires device id to be set, please use setCurrentDevice function.");""!=$8e21a199ffaaeeb1$var$currentDevice&&$.push("-s "+$8e21a199ffaaeeb1$var$currentDevice),console.log($8e21a199ffaaeeb1$var$explicitAdbPath);const e=(0,$iEn1Z$child_process.spawn)("adb",$,{env:{...$iEn1Z$process.env,PATH:`undefined;${$8e21a199ffaaeeb1$var$explicitAdbPath};`}});e.stdout.on("data",e=>a(e.toString())),e.stderr.on("data",e=>r(new Error(e.toString()))),e.on("error",e=>r(new Error(e.toString())))}),$8e21a199ffaaeeb1$var$isAdbInstalled=()=>new Promise((a,e)=>{$8e21a199ffaaeeb1$var$execCmd("--help").then(()=>a(!0)).catch(e=>a(!1))}),$8e21a199ffaaeeb1$var$deviceList=()=>new Promise((r,a)=>{$8e21a199ffaaeeb1$var$execCmd("devices").then(e=>{let a=e.split($iEn1Z$os.EOL);a.shift(),e=(a=a.filter(e=>""!=e)).map(e=>{const a=e.split(/\s+/);return{type:(e=/\W+/.test(a[0]))?"virtual":"physical",udid:a[0],port:e?a[0].match(/\W\d{4}/)[0].slice(1,5):null}}),console.log(e),r(e)}).catch(e=>{console.log(e),a([])})}),$8e21a199ffaaeeb1$var$setCurrentActiveDevice=e=>{$8e21a199ffaaeeb1$var$explicitAdbPath=e},$8e21a199ffaaeeb1$var$setAdbExplicitPath=e=>{$8e21a199ffaaeeb1$var$explicitAdbPath=e},$8e21a199ffaaeeb1$var$killServer=()=>$8e21a199ffaaeeb1$var$execCmd("kill-server"),$8e21a199ffaaeeb1$var$startServer=()=>$8e21a199ffaaeeb1$var$execCmd("start-server"),$8e21a199ffaaeeb1$var$reconnect=()=>$8e21a199ffaaeeb1$var$execCmd("reconnect"),$8e21a199ffaaeeb1$var$adb={isAdbInstalled:$8e21a199ffaaeeb1$var$isAdbInstalled,reconnect:$8e21a199ffaaeeb1$var$reconnect,startServer:$8e21a199ffaaeeb1$var$startServer,killServer:$8e21a199ffaaeeb1$var$killServer,setAdbExplicitPath:$8e21a199ffaaeeb1$var$setAdbExplicitPath,setCurrentActiveDevice:$8e21a199ffaaeeb1$var$setCurrentActiveDevice,deviceList:$8e21a199ffaaeeb1$var$deviceList};var $8e21a199ffaaeeb1$export$2e2bcd8739ae039=$8e21a199ffaaeeb1$var$adb,$f5bfd4ce37214f4f$export$2e2bcd8739ae039=$8e21a199ffaaeeb1$var$adb;